// Generated by CoffeeScript 1.6.3
(function($, window) {
	var Plugin, document, nomePlugin, padroes;
	nomePlugin = "destaquePrincipal";
	document = window.document;
	padroes = {
		posicaoInicial: 0,
		tempoAutoAnimacao: 5000,
		velocidadeTransicao: 400
	};
	Plugin = (function() {
		function Plugin(elemento, opcoes) {
			this.elemento = elemento;
			this.$elemento = $(this.elemento);
			this.opcoes = $.extend({}, padroes, opcoes);
			this.iniciar();
		}

		Plugin.prototype.iniciar = function() {
			var $anterior, $elemento, $itens, $links, $navegacao, $opcoes, $primeiroItem, $proximo, $ultimoItem, animacao, ativarAnimacao, ativarAutoAnimacao, autoAnimacao, desativarAnimacao, desativarAutoAnimacao, indiceItem, larguraItem, larguraItens, numeroItens, posicaoAtual, urlImagem;
			$opcoes = this.opcoes;
			$elemento = this.$elemento;
			$anterior = $elemento.find(".area-0 .anterior");
			$proximo = $elemento.find(".area-0 .proximo");
			$itens = $elemento.find(".area-0 .itens");
			$links = $elemento.find(".area-1 .itens");
			$primeiroItem = $itens.find(".item:first-child").clone().removeAttr("data-indice");
			$ultimoItem = $itens.find(".item:last-child").clone().removeAttr("data-indice");
			numeroItens = $itens.find(".item").length;
			larguraItem = 1024;
			larguraItens = larguraItem * numeroItens;
			indiceItem = $opcoes.posicaoInicial;
			posicaoAtual = 0;
			autoAnimacao = $opcoes.autoAnimacao;
			animacao = null;
			if (numeroItens === 1) {
				$navegacao = $elemento.find(".navegacao");
				urlImagem = $elemento.find(".area-0 .item[data-indice=0] .link").attr("href");
				$navegacao.attr("href", urlImagem).find(".icone").hide();
				$elemento.find(".area-1").hide();
				return false;
			}
			$itens.width(larguraItens + (larguraItem * 2)).append($primeiroItem).prepend($ultimoItem).css({
				left: -larguraItem * ($opcoes.posicaoInicial + 1)
			});
			$itens.find('.item').filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
			$links.find(".link").filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
			ativarAnimacao = function() {
				desativarAutoAnimacao();
				$anterior.click(function() {
					desativarAnimacao();
					indiceItem--;
					if (indiceItem < 0) {
						indiceItem = numeroItens - 1;
					}
					posicaoAtual = parseInt($itens.position().left, 10) + larguraItem;
					if (posicaoAtual === 0) {
						$itens.css({
							left: -larguraItens - larguraItem
						});
						indiceItem = numeroItens - 1;
						posicaoAtual = -larguraItens;
					}
					$itens.animate({
						left: posicaoAtual
					}, $opcoes.velocidadeTransicao, function() {
						return ativarAnimacao();
					});
					$itens.find('.item').removeClass('selecionado').filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
					return $links.find(".link").removeClass("selecionado").filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
				});
				$proximo.click(function() {
					desativarAnimacao();
					indiceItem++;
					if (indiceItem > (numeroItens - 1)) {
						indiceItem = 0;
					}
					posicaoAtual = parseInt($itens.position().left, 10) - larguraItem;
					if (posicaoAtual === -(larguraItens + larguraItem)) {
						$itens.css({
							left: 0
						});
						indiceItem = 0;
						posicaoAtual = -larguraItem;
					}
					$itens.animate({
						left: posicaoAtual
					}, $opcoes.velocidadeTransicao, function() {
						return ativarAnimacao();
					});
					$itens.find('.item').removeClass('selecionado').filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
					return $links.find(".link").removeClass("selecionado").filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
				});
				$links.find(".link").click(function() {
					desativarAnimacao();
					indiceItem = parseInt($(this).attr("data-indice"), 10);
					posicaoAtual = (indiceItem + 1) * -larguraItem;
					$itens.animate({
						left: posicaoAtual
					}, $opcoes.velocidadeTransicao, function() {
						return ativarAnimacao();
					});
					$itens.find('.item').removeClass('selecionado').filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
					return $links.find(".link").removeClass("selecionado").filter("[data-indice=" + indiceItem + "]").addClass("selecionado");
				});
				$links.find(".link").mouseenter(function() {
					return $(this).parent().find(".grupo").addClass('selecionado');
				});
				$links.find(".link").mouseleave(function() {
					return $(this).parent().find(".grupo").removeClass('selecionado');
				});
				return ativarAutoAnimacao();
			};
			desativarAnimacao = function() {
				desativarAutoAnimacao();
				$anterior.off("click");
				$proximo.off("click");
				return $links.find(".link").off("click");
			};
			ativarAutoAnimacao = function() {
				desativarAutoAnimacao();
				return animacao = window.setInterval(function() {
					return $proximo.click();
				}, $opcoes.tempoAutoAnimacao);
			};
			desativarAutoAnimacao = function() {
				return animacao = window.clearInterval(animacao);
			};
			ativarAnimacao();
			$itens.find(".link").mouseenter(function() {
				return desativarAutoAnimacao();
			});
			return $itens.find(".link").mouseleave(function() {
				return ativarAutoAnimacao();
			});
		};

		return Plugin;

	})();
	return $.fn[nomePlugin] = function(opcoes) {
		return this.each(function() {
			if (!$.data(this, "plugin_" + nomePlugin)) {
				return $.data(this, "plugin_" + nomePlugin, new Plugin(this, opcoes));
			}
		});
	};
})(jQuery, window);

$(document).ready(function() {
	$(".destaque-principal").destaquePrincipal();
});
